<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="userdashboard::layout(~{::main})">

<head>

</head>

<body class="text-light" style="background-color: #121212;">

    <!-- Main Content -->
    <main>
        <div class="p-4 px-5 rounded" style="background-color: #1f1f1f;">

            <h4 class="mb-4">My Orders</h4>
            <div class="d-flex gap-3">
                <!-- Status Filter -->
                <div class="d-flex gap-3">
                    <!-- Order Status Filter -->
                    <div class="dropdown mb-4">
                        <button class="btn btn-outline-secondary dropdown-toggle" type="button" id="statusDropdown"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            Order Status
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="statusDropdown">
                            <li><a class="dropdown-item"
                                    th:href="@{/order(status='On the Way', timePeriod=${param.timePeriod})}">On the
                                    Way</a></li>
                            <li><a class="dropdown-item"
                                    th:href="@{/order(status='Delivered', timePeriod=${param.timePeriod})}">Delivered</a>
                            </li>
                            <li><a class="dropdown-item"
                                    th:href="@{/order(status='Shipped', timePeriod=${param.timePeriod})}">Shipped</a>
                            </li>
                            <li><a class="dropdown-item"
                                    th:href="@{/order(status='Pending', timePeriod=${param.timePeriod})}">Pending</a>
                            </li>
                            <li><a class="dropdown-item"
                                    th:href="@{/order(status='Cancelled', timePeriod=${param.timePeriod})}">Cancelled</a>
                            </li>
                            <li><a class="dropdown-item"
                                    th:href="@{/order(status='Returned', timePeriod=${param.timePeriod})}">Returned</a>
                            </li>
                            <li><a class="dropdown-item" th:href="@{/order(timePeriod=${param.timePeriod})}">All
                                    Statuses</a></li>
                        </ul>
                    </div>

                    <!-- Order Time Filter -->
                    <div class="dropdown mb-4">
                        <button class="btn btn-outline-secondary dropdown-toggle" type="button" id="timeDropdown"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            Order Time
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="timeDropdown">
                            <li><a class="dropdown-item"
                                    th:href="@{/order(status=${param.status}, timePeriod='Last 30 days')}">Last 30
                                    days</a></li>
                            <li><a class="dropdown-item"
                                    th:href="@{/order(status=${param.status}, timePeriod='2024')}">2024</a></li>
                            <li><a class="dropdown-item"
                                    th:href="@{/order(status=${param.status}, timePeriod='2023')}">2023</a></li>
                            <li><a class="dropdown-item"
                                    th:href="@{/order(status=${param.status}, timePeriod='2022')}">2022</a></li>
                            <li><a class="dropdown-item" th:href="@{/order(status=${param.status})}">All Time</a></li>
                        </ul>
                    </div>
                    <div class="dropdown mb-4">
                        <button class="btn btn-outline-secondary dropdown-toggle" type="button" id="sortDropdown"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            Sort By
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="sortDropdown">
                            <li><a class="dropdown-item" th:href="@{/order(sort='newest')}">Newest First</a></li>
                            <li><a class="dropdown-item" th:href="@{/order(sort='oldest')}">Oldest First</a></li>
                            <li><a class="dropdown-item" th:href="@{/order(sort='price-high')}">Price: High to Low</a>
                            </li>
                            <li><a class="dropdown-item" th:href="@{/order(sort='price-low')}">Price: Low to High</a>
                            </li>
                        </ul>
                    </div>
                </div>

            </div>

            <div id="product-1" class="card mb-4 p-3" th:each="order : ${orderitems}">
                <div class="row align-items-center d-flex">
                    <div class="col-2"
                        th:if="${order.product.images != null and not #lists.isEmpty(order.product.images)}">
                        <img th:src="@{${order.product.images[0].imageUrl}}" alt="Product Image" class="img-fluid"
                            style="border-radius: 5px;">
                    </div>
                    <div class="col-7">
                        <p class="text-light mb-2" th:text="${order.product.prodName}">Kadhai - Cast Iron Blacksmith
                            Hybrid Series</p>
                        <div class="wishlist-price fw-bold" style="font-size: 1rem;">
                            <span class="text-danger" style="font-size: 1.2rem;">â‚¹<span
                                    th:text="${order.product.offerPrice}"></span></span>
                        </div>
                    </div>
                    <div class="col-3 text-end text-light">
                        <!-- Future delivery -->
                        <p style="font-size: 14px;"
                            th:if="${order.deliveryDate != null and order.deliveryDate > T(java.time.LocalDate).now()}">
                            Your item will arrive on <span th:text="${order.deliveryDate}"></span>
                            Your item has been <span th:text="${order.status}"></span>
                        </p>

                        <!-- Already delivered -->
                        <p style="font-size: 14px;"
                            th:if="${order.deliveryDate != null and order.deliveryDate <= T(java.time.LocalDate).now()}">
                            Your item was delivered on <span th:text="${order.deliveryDate}"></span>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </main>
</body>

</html>